#!/usr/bin/env node

'use strict';

const exists = require('fs').existsSync;
const mkdir = require('fs').mkdirSync;
const test = require('tape').test;

const MongoDB = require('../').MongoDBPlugin;

const path = '/tmp/backup';
if (!exists(path)) mkdir(path);
const mongo = new MongoDB({ debug: true, path });

test('Backup mongodb @ localhost', function (assert) {
    mongo.backup({ host: 'localhost', db: 'backup_test', gzip: true }, (error) => {
        if (!error) assert.ok(true, 'backup saved');
        else assert.fail(error.message);
        assert.end();
    });
});
